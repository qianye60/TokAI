

# TokAI - æ™ºèƒ½å¯¹è¯åŠ©æ‰‹

TokAI æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„å…¨æ ˆæ™ºèƒ½å¯¹è¯åŠ©æ‰‹åº”ç”¨ï¼Œæä¾›æµç•…çš„å¯¹è¯ä½“éªŒå’Œä¼˜é›…çš„ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒå¤šç§AIæ¨¡å‹æ¥å…¥ã€‚

## é»˜è®¤è´¦å·å¯†ç 

- **admin**
- **123456**
### ç™»é™†åè®°å¾—ä¿®æ”¹è´¦å·å¯†ç 
  
## åŠŸèƒ½ç‰¹ç‚¹

-   ğŸ¨ **ä¸»é¢˜å®šåˆ¶**
    -   **æ˜æš—æ¨¡å¼åˆ‡æ¢**ï¼šæ”¯æŒæµ…è‰²å’Œæ·±è‰²ä¸¤ç§è§†è§‰ä¸»é¢˜ï¼Œæ»¡è¶³ä¸åŒç¯å¢ƒä¸‹çš„ä½¿ç”¨åå¥½
    -   **å®æ—¶åº”ç”¨**ï¼šä¸»é¢˜æ›´æ”¹å³æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€åˆ·æ–°
    -   **åå¥½è®°å¿†**ï¼šè‡ªåŠ¨ä¿å­˜ç”¨æˆ·é€‰æ‹©çš„ä¸»é¢˜è®¾ç½®

-   ğŸ’¬ **æ ¸å¿ƒå¯¹è¯åŠŸèƒ½**
    -   **å¯¹è¯ç®¡ç†**ï¼šè½»æ¾åˆ›å»ºæ–°å¯¹è¯ã€é‡å‘½åç°æœ‰å¯¹è¯ä»¥åŠåˆ é™¤ä¸éœ€è¦çš„å¯¹è¯
    -   **æ‰¹é‡æ“ä½œ**ï¼šæä¾›æ‰¹é‡åˆ é™¤å¯¹è¯çš„åŠŸèƒ½ï¼Œæ–¹ä¾¿ç®¡ç†
    -   **å†å²è®°å½•**ï¼šè‡ªåŠ¨ä¿å­˜å¯¹è¯è¿‡ç¨‹ï¼Œæ–¹ä¾¿å›é¡¾
    -   **å¤šæ¨¡å‹æ”¯æŒ**ï¼šæ”¯æŒæ¥å…¥OpenAIã€Googleç­‰å¤šç§AIæœåŠ¡

-   ğŸ‘¤ **ç”¨æˆ·ç³»ç»Ÿ**
    -   **è´¦æˆ·ç®¡ç†**ï¼šç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œæƒé™æ§åˆ¶
    -   **é‚®ç®±éªŒè¯**ï¼šæ”¯æŒé‚®ç®±éªŒè¯åŠŸèƒ½
    -   **ç®¡ç†åå°**ï¼šæä¾›ç®¡ç†å‘˜æ§åˆ¶é¢æ¿

-   ğŸ¯ **ç”¨æˆ·ç•Œé¢ä¸ä½“éªŒ**
    -   **å“åº”å¼è®¾è®¡**ï¼šä¾§è¾¹æ å’Œæ•´ä½“å¸ƒå±€èƒ½è‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸
    -   **æµç•…åŠ¨ç”»**ï¼šç•Œé¢äº¤äº’åŒ…å«ä¼˜é›…è‡ªç„¶çš„è¿‡æ¸¡æ•ˆæœ
    -   **ç°ä»£åŒ–ç»„ä»¶**ï¼šé‡‡ç”¨ Ant Design Vue æ„å»ºï¼Œæä¾›é«˜è´¨é‡ã€ä¸€è‡´æ€§çš„ UI å…ƒç´ 
## éƒ¨ç½² (Deployment)

æ¨èä½¿ç”¨ Docker Compose è¿›è¡Œéƒ¨ç½²ï¼Œå¯ä»¥ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆå‰ç«¯ã€åç«¯ã€Nginxï¼‰ã€‚

### ä½¿ç”¨ Docker Compose (æ¨è)

1.  ç¡®ä¿ä½ çš„æœºå™¨ä¸Šå®‰è£…äº† Docker å’Œ Docker Composeã€‚
2.  åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰¾åˆ° `docker-compose.yml` æ–‡ä»¶ã€‚
3.  æ ¹æ®éœ€è¦ä¿®æ”¹ `.env` æ–‡ä»¶ï¼ˆå¦‚æœ `docker-compose.yml` ä¸­ä½¿ç”¨äº†ç¯å¢ƒå˜é‡ï¼‰æˆ–ç›´æ¥ä¿®æ”¹ `docker-compose.yml` ä¸­çš„é…ç½®ï¼ˆä¾‹å¦‚ç«¯å£æ˜ å°„ï¼‰ã€‚
4.  åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

    ```bash
    # ä¸‹è½½docker-compose.yamlï¼Œåœ¨æ‰€åœ¨ç›®å½•ä¸‹æ‰§è¡Œä¸‹é¢å‘½ä»¤éƒ¨ç½²
    docker-compose up -d

    # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
    docker-compose ps

    # æŸ¥çœ‹æ—¥å¿—
    docker-compose logs -f

    # åœæ­¢å¹¶ç§»é™¤å®¹å™¨ã€ç½‘ç»œ
    docker-compose down
    ```

### ä½¿ç”¨ Docker å‘½ä»¤ (æ‰‹åŠ¨éƒ¨ç½²ï¼Œæ›´å¤æ‚)

ä½¿ç”¨å•ç‹¬çš„ `docker run` å‘½ä»¤éƒ¨ç½²å¤šå®¹å™¨åº”ç”¨æ¯”è¾ƒç¹çï¼Œä½ éœ€è¦ï¼š

1.  **æ„å»ºé•œåƒ**ï¼šåˆ†åˆ«ä¸ºå‰ç«¯ï¼ˆé€šå¸¸æ˜¯æ„å»ºé™æ€æ–‡ä»¶åç”¨ Nginx æœåŠ¡ï¼‰å’Œåç«¯æ„å»º Docker é•œåƒã€‚
    ```bash
    # æ„å»ºåç«¯é•œåƒ (å‡è®¾ Dockerfile åœ¨ server/ ç›®å½•ä¸‹)
    docker build -t tokai-backend:latest ./server

    # æ„å»ºå‰ç«¯é•œåƒ (éœ€è¦ä¸€ä¸ªæœåŠ¡é™æ€æ–‡ä»¶çš„ Dockerfileï¼Œä¾‹å¦‚ä½¿ç”¨ Nginx)
    # cd Vue3 && npm run build # å…ˆæ„å»ºå‰ç«¯é™æ€æ–‡ä»¶
    # docker build -t tokai-frontend:latest . # å‡è®¾ Vue3 ç›®å½•ä¸‹æœ‰ç›¸åº” Dockerfile
    ```
2.  **åˆ›å»ºç½‘ç»œ**ï¼šåˆ›å»ºä¸€ä¸ª Docker ç½‘ç»œï¼Œè®©å®¹å™¨å¯ä»¥äº’ç›¸é€šä¿¡ã€‚
    ```bash
    docker network create tokai-net
    ```
3.  **å¯åŠ¨åç«¯å®¹å™¨**ï¼š
    ```bash
    docker run -d --name tokai-backend-container --network tokai-net \
      -v ./data/sqlite:/app/sqlite \ # ç¤ºä¾‹ï¼šæŒ‚è½½æ•°æ®åº“å·
      -p 8000:8000 \ # ç¤ºä¾‹ï¼šæ˜ å°„ç«¯å£ (å¦‚æœ Nginx ä»£ç†ï¼Œæ­¤ç«¯å£å¯èƒ½ä¸éœ€è¦æš´éœ²ç»™ä¸»æœº)
      # -e ENV_VAR=value \ # æ·»åŠ æ‰€éœ€ç¯å¢ƒå˜é‡
      tokai-backend:latest
    ```
    *æ³¨æ„ï¼š* è¿™é‡Œçš„ `-v ./data/sqlite:/app/sqlite` æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œä½ éœ€è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´æ•°æ®åº“æ–‡ä»¶åœ¨å®¹å™¨å†…çš„è·¯å¾„å’Œå®¿ä¸»æœºçš„æŒ‚è½½ç‚¹ã€‚ç«¯å£æ˜ å°„ `-p 8000:8000` å¦‚æœæœ‰ Nginx ä½œä¸ºåå‘ä»£ç†ï¼Œå¯èƒ½ä¸éœ€è¦ç›´æ¥æš´éœ²ç»™å®¿ä¸»æœºï¼Œè€Œæ˜¯è®© Nginx å®¹å™¨è®¿é—®ã€‚
4.  **å¯åŠ¨å‰ç«¯/Nginx å®¹å™¨**ï¼šä½ éœ€è¦ä¸€ä¸ªé…ç½®å¥½çš„ Nginx å®¹å™¨æ¥æœåŠ¡å‰ç«¯é™æ€æ–‡ä»¶ï¼Œå¹¶å°† API è¯·æ±‚ä»£ç†åˆ°åç«¯å®¹å™¨ã€‚
    ```bash
    docker run -d --name tokai-nginx-container --network tokai-net \
      -p 80:80 -p 443:443 \ # æ˜ å°„ HTTP å’Œ HTTPS ç«¯å£
      -v ./nginx.conf:/etc/nginx/nginx.conf:ro \ # æŒ‚è½½ Nginx é…ç½®
      -v ./Vue3/dist:/usr/share/nginx/html:ro \ # æŒ‚è½½å‰ç«¯æ„å»ºäº§ç‰©
      # -v /path/to/ssl/certs:/etc/nginx/certs:ro \ # å¦‚æœä½¿ç”¨ HTTPSï¼ŒæŒ‚è½½è¯ä¹¦
      nginx:latest # æˆ–è€…ä½ æ„å»ºçš„åŒ…å«å‰ç«¯æ–‡ä»¶çš„ Nginx é•œåƒ tokai-frontend:latest
    ```
    *æ³¨æ„ï¼š* Nginx çš„é…ç½® (`nginx.conf`) éœ€è¦æ­£ç¡®è®¾ç½® `server_name`ã€é™æ€æ–‡ä»¶è·¯å¾„ (`root`) ä»¥åŠåå‘ä»£ç† (`proxy_pass`) åˆ°åç«¯å®¹å™¨å (`tokai-backend-container`) å’Œç«¯å£ (8000)ã€‚

**å¼ºçƒˆå»ºè®®**ï¼šå¯¹äºè¿™ç§å¤šæœåŠ¡çš„åº”ç”¨ï¼Œç›´æ¥ä½¿ç”¨ `docker-compose` ä¼šæå¤§ç®€åŒ–éƒ¨ç½²å’Œç®¡ç†è¿‡ç¨‹ã€‚ä¸Šé¢çš„ `docker run` å‘½ä»¤ä»…ä¸ºç¤ºä¾‹ï¼Œå®é™…æ“ä½œå¯èƒ½éœ€è¦æ ¹æ®ä½ çš„å…·ä½“é…ç½®è¿›è¡Œè°ƒæ•´ã€‚

## æŠ€æœ¯æ ˆ

### å‰ç«¯
-   **æ¡†æ¶**ï¼šVue 3 + TypeScript
-   **çŠ¶æ€ç®¡ç†**ï¼šPinia
-   **UIç»„ä»¶åº“**ï¼šAnt Design Vue
-   **æ ·å¼å¤„ç†**ï¼šSCSS
-   **æ„å»ºå·¥å…·**ï¼šVite
-   **Markdownæ¸²æŸ“**ï¼šmarkdown-it, highlight.js

### åç«¯
-   **æ¡†æ¶**ï¼šFastAPI (Python)
-   **æ•°æ®åº“**ï¼šSQLite
-   **èº«ä»½éªŒè¯**ï¼šJWT
-   **APIä¸­ç»§**ï¼šæ”¯æŒè½¬å‘åˆ°OpenAIã€Googleç­‰AIæœåŠ¡æä¾›å•†
-   **æœåŠ¡å™¨**ï¼šUvicorn

### éƒ¨ç½²
-   **å®¹å™¨åŒ–**ï¼šDocker
-   **ç¼–æ’**ï¼šDocker Compose
-   **WebæœåŠ¡å™¨**ï¼šNginx

## é¡¹ç›®ç»“æ„

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ Vue3/                # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ public/          # é™æ€èµ„æº
â”‚   â”œâ”€â”€ src/             # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ assets/      # æœ¬åœ°èµ„æº (ä¼šè¢« Vite å¤„ç†)
â”‚   â”‚   â”œâ”€â”€ components/  # å¯å¤ç”¨ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ constants/   # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ hooks/       # Composition API Hooks
â”‚   â”‚   â”œâ”€â”€ interface/   # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ layouts/     # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/       # é¡µé¢çº§ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/      # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ services/    # API è¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ store/       # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ styles/      # å…¨å±€æ ·å¼ä¸ SCSS å˜é‡
â”‚   â”‚   â”œâ”€â”€ utils/       # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ App.vue      # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts      # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html       # å…¥å£HTMLæ–‡ä»¶
â”‚   â”œâ”€â”€ package.json     # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â””â”€â”€ vite.config.ts   # Viteé…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ server/              # åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ admin/           # ç®¡ç†å‘˜åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ admin.py     # ç®¡ç†æ¥å£è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ api_manage.py # APIå¯†é’¥ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ config_manage.py # ç³»ç»Ÿé…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ email_manage.py # é‚®ä»¶è®¾ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ user_manage.py # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ api/             # AIæœåŠ¡API
â”‚   â”‚   â”œâ”€â”€ google.py    # Google AIæ¥å£
â”‚   â”‚   â”œâ”€â”€ new_api.py   # é€šç”¨APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ openai.py    # OpenAIæ¥å£
â”‚   â”‚   â””â”€â”€ relay.py     # APIä¸­ç»§æœåŠ¡
â”‚   â”œâ”€â”€ chat/            # å¯¹è¯åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ chat_manage.py # å¯¹è¯ç®¡ç†
â”‚   â”‚   â””â”€â”€ message_manage.py # æ¶ˆæ¯ç®¡ç†
â”‚   â”œâ”€â”€ model/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ sqlite/          # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ upfile/          # æ–‡ä»¶ä¸Šä¼ 
â”‚   â”œâ”€â”€ user/            # ç”¨æˆ·è®¤è¯
â”‚   â”œâ”€â”€ main.py          # åç«¯ä¸»å…¥å£
â”‚   â”œâ”€â”€ requirements.txt # åç«¯ä¾èµ–é…ç½®
â”‚   â””â”€â”€ Dockerfile       # åç«¯Dockeré…ç½®
â”‚
â”œâ”€â”€ docker-compose.yml   # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ nginx.conf           # Nginxé…ç½®
â”œâ”€â”€ LICENSE              # MITè®¸å¯è¯
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## å¼€å‘ç¯å¢ƒè¦æ±‚

-   Node.js >= 16
-   npm >= 7 (æˆ– pnpm / yarn)
-   Docker & Docker Compose

## æœ¬åœ°å¼€å‘è¿è¡Œ

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd <project-root-directory>

# 2. å¯åŠ¨åç«¯ (å‡è®¾åœ¨é¡¹ç›®æ ¹ç›®å½•)
#    (æ ¹æ®ä½ çš„åç«¯è®¾ç½®ï¼Œå¯èƒ½éœ€è¦å…ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–)
#    pip install -r server/requirements.txt
#    uvicorn server.main:app --reload --port 8000 # ç¤ºä¾‹å‘½ä»¤

# 3. å¯åŠ¨å‰ç«¯
cd Vue3

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (é€šå¸¸å¸¦æœ‰çƒ­é‡è½½)
npm run dev

# 4. æ„å»ºç”¨äºç”Ÿäº§ç¯å¢ƒçš„å‰ç«¯åº”ç”¨
# npm run build

# 5. é¢„è§ˆç”Ÿäº§æ„å»ºçš„åº”ç”¨
# npm run preview
```



## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šæäº¤ Bug æŠ¥å‘Šã€æå‡ºåŠŸèƒ½å»ºè®®ã€æ”¹è¿›ä»£ç æˆ–æ–‡æ¡£ã€‚è¯·é€šè¿‡æäº¤ Issue æˆ– Pull Request çš„æ–¹å¼å‚ä¸ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) æˆæƒã€‚
```
